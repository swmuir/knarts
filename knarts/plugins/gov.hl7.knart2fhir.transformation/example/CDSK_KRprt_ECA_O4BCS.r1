<knowledgeDocument xmlns="urn:hl7-org:knowledgeartifact:r1" xmlns:dt="urn:hl7-org:cdsdt:r2" xmlns:elm="urn:hl7-org:elm:r1"
   xmlns:t="urn:hl7-org:elm-types:r1" xmlns:a="urn:hl7-org:cql-annotations:r1" xmlns:p1="http://www.w3.org/1999/xhtml"
   xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:anf="http://hl7.org/anf"
   xsi:schemaLocation="urn:hl7-org:knowledgeartifact:r1 ../../schema/knowledgeartifact/knowledgedocument.xsd urn:hl7-org:elm:r1 ../../schema/elm/clinicalexpression.xsd urn:hl7-org:elm-types:r1 ../../schema/elm/types.xsd urn:hl7-org:cql-annotations:r1 ../../schema/elm/cqlannotations.xsd">
   <metadata>
      <identifiers>
         <identifier root="urn:va.gov:kbs:knart:artifact:r1" extension="18bf1fa5-e352-5edb-8dd8-bc872a65d326" identifierName="O4" version="1.0"/>
         <identifier root="urn:va.gov:kbs:contract:VA118-16-D-1008:to:VA-118-16-F-1008-0007" extension="CLIN0007BA"
            identifierName="Contract: VA118-16-D-1008, Task Order (TO): VA-118-16-F-1008-0007, CLIN0007BA"/>
         <identifier root="urn:cognitivemedicine.com:lab:jira" extension="KP-883" identifierName="Jira KP-883"/>
      </identifiers>
      <artifactType value="Rule"/>
      <schemaIdentifier root="urn:hl7-org:knowledgeartifact:r1" version="1"/>
      <dataModels>
         <modelReference>
            <description value="VA Analysis Normal Form Model"/>
            <referencedModel value="urn:solor.io:anf-model:1.0"/>
         </modelReference>
      </dataModels>
      <title value="Women's Health: Breast Cancer Screening Rule"/>
      <relatedResources>
         <relatedResource>
            <relationship value="DerivedFrom"/>
            <resources>
               <resource>
                  <identifiers>
                     <identifier root="LocalDocBook" identifierName="CCWP" extension="sr1"/>
                  </identifiers>
                  <title value="Women's Health: Breast Cancer Screening Clinical Content White Paper"/>
                  <location value="20171221CDSK_CCWP_O4B31B53BCS_final.xml"/>
                  <description value="Clinical Content White Paper"/>
               </resource>
            </resources>
         </relatedResource>
         <relatedResource>
            <relationship value="AssociatedResource"/>
            <resources>
               <resource>
                  <identifiers>
                     <identifier root="LocalDocBook" identifierName="CSD" extension="sr2"/>
                     <identifier root="urn:va.gov:kbs:contract:VA118-16-D-1008:to:VA-118-16-F-1008-0007" extension="CLIN0007BA"
                        identifierName="Contract: VA118-16-D-1008, Task Order (TO): VA-118-16-F-1008-0007, CLIN0007BA"/>
                  </identifiers>
                  <title value="Women's Health: Breast Cancer Screening Rule Conceptual Structure Document"/>
               </resource>
            </resources>
         </relatedResource>
         <relatedResource>
            <relationship value="AssociatedResource"/>
            <resources>
               <resource>
                  <identifiers>
                     <identifier root="LocalDocBook" identifierName="KVRpt" extension="sr3"/>
                     <identifier root="urn:va.gov:kbs:contract:VA118-16-D-1008:to:VA-118-16-F-1008-0007" extension="CLIN0007BA"
                        identifierName="Contract: VA118-16-D-1008, Task Order (TO): VA-118-16-F-1008-0007, CLIN0007BA"/>
                  </identifiers>
                  <title value="Women's Health: Breast Cancer Screening Rule KNART Validation Report"/>
               </resource>
            </resources>
         </relatedResource>
      </relatedResources>
      <supportingEvidence>
         <evidence>
            <resources>
               <resource>
                  <identifiers>
                     <identifier root="LocalDocBook" identifierName="Nelson 2009" extension="e1"/>
                  </identifiers>
                  <title value="Screening for Breast Cancer A Systematic Review to Update the 2009 U.S. Preventive Services Task Force Recommendation"/>
                  <location value="https://www.uspreventiveservicestaskforce.org/Page/Document/UpdateSummaryFinal/breast-cancer-screening"/>
                  <citation
                     value="H. D. Nelson et al., Screening for Breast Cancer A Systematic Review to Update the 2009 U.S. Preventive Services Task Force Recommendation, Agency for Healthcare Research and Quality, USA, Jan. 2016."
                  />
               </resource>
               <resource>
                  <identifiers>
                     <identifier root="https://doi.org" extension="10.1001/jama.2015.12783" identifierName="DOI"/>
                     <identifier root="LocalDocBook" identifierName="Oeffinger 2015" extension="e2"/>
                  </identifiers>
                  <title value="Breast Cancer Screening for Women at Average Risk: 2015 Guideline Update From the American Cancer Society"/>
                  <location value="https://doi.org/10.1001/jama.2015.12783"/>
                  <citation
                     value="Oeffinger, 2015. Oeffinger KC, Fontham ETH, Etzioni R, et al. Breast Cancer Screening for Women at Average Risk: 2015 Guideline Update From the American Cancer Society. JAMA. 2015;314(15):1599-1614"
                  />
               </resource>
               <resource>
                  <identifiers>
                     <identifier root="https://doi.org" extension="10.1097/AOG.0000000000002158" identifierName="DOI"/>
                     <identifier root="LocalDocBook" identifierName="Pearlman 2017" extension="e3"/>
                  </identifiers>
                  <title value="Breast Cancer Risk Assessment and Screening in Average-Risk Women"/>
                  <location value="https://doi.org/10.1097/AOG.0000000000002158"/>
                  <citation
                     value="Pearlman, 2017. Pearlman M, Jeudy M, Chelmow D. Breast Cancer Risk Assessment and Screening in Average-Risk Women. OBSTETRICS AND GYNECOLOGY. 2017 Jul 1;130(1):E1-6"
                  />
               </resource>
               <resource>
                  <identifiers>
                     <identifier root="LocalDocBook" identifierName="ACS 2017" extension="e4"/>
                  </identifiers>
                  <title value="American Cancer Society Breast Cancer Screening Guidelines"/>
                  <location
                     value="https://www.cancer.org/health-care-professionals/american-cancer-society-prevention-early-detection-guidelines/breast-cancer-screening-guidelines.html"/>
                  <citation
                     value="American Cancer Society Breast Cancer Screening Guidelines. American Cancer Society [Internet]. 2018 [cited 2018 Jan 24]."
                  />
               </resource>
            </resources>
         </evidence>
      </supportingEvidence>
      <applicability>
         <coverage>
            <focus value="PatientAgeGroup"/>
            <description value="Female outpatients &gt;=40 and &lt;45 years of age."/>
         </coverage>
         <coverage>
            <focus value="ClinicalFocus"/>
            <description value="Breast Cancer Screening"/>
         </coverage>
         <coverage>
            <focus value="ClinicalVenue"/>
            <description value="Primary Care"/>
         </coverage>
         <coverage>
            <focus value="ClinicalVenue"/>
            <description value="Obstetrics/Gynecology"/>
         </coverage>
         <coverage>
            <focus value="ClinicalVenue"/>
            <description value="Women's Health"/>
         </coverage>
      </applicability>
      <status value="Active"/>
      <eventHistory>
         <artifactLifeCycleEvent>
            <eventType value="Published"/>
            <eventDateTime value="20180417"/>
         </artifactLifeCycleEvent>
         <artifactLifeCycleEvent>
            <eventType value="Reviewed"/>
            <eventDateTime value="20180417"/>
         </artifactLifeCycleEvent>
         <artifactLifeCycleEvent>
            <eventType value="Created"/>
            <eventDateTime value="20180216"/>
         </artifactLifeCycleEvent>
      </eventHistory>
      <contributions>
         <contribution>
            <contributor xsi:type="Person">
               <name>
                  <dt:part type="GIV" value="C. Yvette"/>
                  <dt:part type="FAM" value="Williams-Harris"/>
                  <dt:part type="TITLE" value="MD, MPH"/>
               </name>
               <affiliation>
                  <name value="Physician, 1670 Clairmont Rd Atlanta, GA 30033"/>
               </affiliation>
            </contributor>
            <role value="Author"/>
         </contribution>
         <contribution>
            <contributor xsi:type="Person">
               <name>
                  <dt:part type="GIV" value="Megan"/>
                  <dt:part type="FAM" value="Gerber"/>
                  <dt:part type="TITLE" value="MD, MPH"/>
               </name>
               <affiliation>
                  <name value="Physician, VA Boston HealthCare System, 150 South Huntington Ave Boston, MA 02130"/>
               </affiliation>
            </contributor>
            <role value="Author"/>

         </contribution>
         <contribution>
            <contributor xsi:type="Person">
               <name>
                  <dt:part type="GIV" value="Caitlin M."/>
                  <dt:part type="FAM" value="Cusack"/>
                  <dt:part type="TITLE" value="MD, MPH"/>
               </name>
               <affiliation>
                  <name
                     value="Contractor- Physician Informaticist, Office of Women's Health Services, 8455 Colesville Rd, 12th Floor Silver Spring, MD 20910"
                  />
               </affiliation>
            </contributor>
            <role value="Author"/>
         </contribution>
      </contributions>
      <publishers>
         <publisher xsi:type="Organization">
            <name value="Department of Veterans Affairs"/>
         </publisher>
      </publishers>
      
   </metadata>
   <externalData>
      <codesystem name="SNOMED CT" id="2.16.840.1.113883.6.96" version="United States Edition 20180301"/>
      <def name="PatientGender">
         <elm:expression xsi:type="elm:SingletonFrom">
            <elm:operand xsi:type="elm:Retrieve" dataType="anf:ClinicalStatement" codeProperty="topic">
               <elm:codes xsi:type="elm:List">
                  <elm:element xsi:type="elm:Code"
                     code="[a997cc03-3e99-40eb-833a-6374c7750a3a |Observation procedure (procedure)]
                     ->(363702006 |Has focus (attribute))->[248152002 |Female (finding)]"
                     display="Postcoordinated Expression">
                     <elm:system name="SNOMED CT"/>
                  </elm:element>
               </elm:codes>
            </elm:operand>
         </elm:expression>
      </def>
      <def name="MammographyProcedure">
         <elm:expression xsi:type="elm:Retrieve" dataType="anf:ClinicalStatement" codeProperty="topic" dateProperty="dateTime">
            <elm:codes xsi:type="elm:List">
               <elm:element xsi:type="elm:Code" code="71651007 |Mammography (procedure)|" display="Postcoordinated Expression">
                  <elm:system name="SNOMED CT"/>
               </elm:element>
            </elm:codes>
            <elm:dateRange xsi:type="elm:Interval">
               <elm:low xsi:type="elm:Add">
                  <elm:operand xsi:type="elm:Today"/>
                  <elm:operand xsi:type="elm:Quantity" unit="Month" value="-12"/>
               </elm:low>
               <elm:high xsi:type="elm:Today"/>
            </elm:dateRange>
         </elm:expression>
      </def>
      <def name="EarlyChestRadiotherapy">
         <elm:expression xsi:type="elm:Retrieve" dataType="anf:ClinicalStatement" codeProperty="topic" dateProperty="dateTime">
            <elm:codes xsi:type="elm:List">
               <elm:element xsi:type="elm:Code" code="108290001 |Radiation oncology AND/OR radiotherapy (procedure)|"
                  display="Postcoordinated Expression">
                  <elm:system name="SNOMED CT"/>
               </elm:element>
            </elm:codes>
            <elm:dateRange xsi:type="elm:Interval">
               <elm:high xsi:type="elm:Add">
                  <elm:operand xsi:type="elm:ExpressionRef" name="PatientAge"/>
                  <elm:operand xsi:type="elm:Quantity" unit="Year" value="30"/>
               </elm:high>
            </elm:dateRange>
         </elm:expression>
      </def>
      <def name="MammographyScreeningInterval">
         <elm:expression xsi:type="elm:Query">
            <elm:source alias="query">
               <elm:expression xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                  <elm:element name="statementType">
                     <elm:value xsi:type="elm:Code" code="398166005 |Performed (qualifier value)|" display="Precoordinated Expression">
                        <elm:system name="SNOMED CT"/>
                     </elm:value>
                  </elm:element>
                  <elm:element name="topic">
                     <elm:value xsi:type="elm:Code" code="268547008 |Screening for malignant neoplasm of breast (procedure)|"
                        display="Precoordinated Expression">
                        <elm:system name="SNOMED CT"/>
                     </elm:value>
                  </elm:element>
               </elm:expression>
            </elm:source>
         </elm:expression>
      </def>
      <def name="GeneticMarker">
         <elm:expression xsi:type="elm:Retrieve" dataType="anf:ClinicalStatement" codeProperty="topic" dateProperty="dateTime">
            <elm:codes xsi:type="elm:List">
               <elm:element xsi:type="elm:Code"
                  code="[a997cc03-3e99-40eb-833a-6374c7750a3a Observation procedure (procedure)]
                  ->(363702006 |Has focus (attribute))->[1e53d17c-cd1c-4251-ae9a-f7b999178c90 |Breast cancer genetic marker of susceptibility finding]"
                  display="Postcoordianted Expression">
                  <elm:system name="SNOMED CT"/>
               </elm:element>
               <elm:element xsi:type="elm:Code"
                  code="[a997cc03-3e99-40eb-833a-6374c7750a3a Observation procedure (procedure)]
                  ->(363702006 |Has focus (attribute))->[1e53d17c-cd1c-4251-ae9a-f7b999178c90 |Breast cancer genetic marker of susceptibility finding (finding)]"
                  display="Postcoordianted Expression">
                  <elm:system name="SNOMED CT"/>
               </elm:element>
            </elm:codes>
         </elm:expression>
      </def>
      <def name="ScreeningDueDate">
         <!-- Return screening due date -->
         <elm:annotation>Breast Cancer Screening due date</elm:annotation>
         <elm:expression xsi:type="elm:Query">
            <elm:source alias="dueDateQuery">
               <elm:expression xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                  <elm:element name="statementType">
                     <elm:value xsi:type="elm:Code" code="398166005 |Performed (qualifier value)|" display="Precoordinated Expression">
                        <elm:system name="SNOMED CT"/>
                     </elm:value>
                  </elm:element>
                  <elm:element name="topic">
                     <elm:value xsi:type="elm:Code" code="268547008 |Screening for malignant neoplasm of breast (procedure)|"
                        display="Precoordinated Expression">
                        <elm:system name="SNOMED CT"/>
                     </elm:value>
                  </elm:element>
                  <elm:element name="result.status">
                     <elm:value xsi:type="elm:Code" code="385643006 |To be done (qualifier value)|" display="Precoordinated Expression">
                        <elm:system name="SNOMED CT"/>
                     </elm:value>
                  </elm:element>
               </elm:expression>
            </elm:source>
            <elm:return>
               <elm:expression xsi:type="elm:Property" path="timing.lowerBound"/>
            </elm:return>
         </elm:expression>
      </def>
      <def name="ScreeningScheduleDate">
         <!-- Return date of next scheduled screening -->
         <elm:annotation>Breast Cancer Screening Scheduled date</elm:annotation>
         <elm:expression xsi:type="elm:Query">
            <elm:source alias="dueDateQuery">
               <elm:expression xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                  <elm:element name="statementType">
                     <elm:value xsi:type="elm:Code" code="398166005 |Performed (qualifier value)|" display="Precoordinated Expression">
                        <elm:system name="SNOMED CT"/>
                     </elm:value>
                  </elm:element>
                  <elm:element name="topic">
                     <elm:value xsi:type="elm:Code" code="268547008 |Screening for malignant neoplasm of breast (procedure)|"
                        display="Precoordinated Expression">
                        <elm:system name="SNOMED CT"/>
                     </elm:value>
                  </elm:element>
                  <elm:element name="result.status">
                     <elm:value xsi:type="elm:Code" code="416151008 |Scheduled - procedure status (qualifier value)|"
                        display="Precoordinated Expression">
                        <elm:system name="SNOMED CT"/>
                     </elm:value>
                  </elm:element>
               </elm:expression>
            </elm:source>
            <elm:return>
               <elm:expression xsi:type="elm:Property" path="timing.lowerBound"/>
            </elm:return>
         </elm:expression>
      </def>
      <trigger xsi:type="DataEventTrigger" triggerType="DataElementAccessed">
         <def name="duringEncounter">
            <elm:expression xsi:type="elm:Instance" classType="anf:ClinicalStatement">
               <elm:annotation >
                  <a:s>Opening of the patient record during an encounter in either a primary care clinic, an OB/GYN or during a women's health
                     outpatient visit</a:s>
               </elm:annotation>
            </elm:expression>
         </def>
      </trigger>
      <trigger xsi:type="DataEventTrigger" triggerType="DataElementAdded">
         <def name="Activation of the breast cancer screening order set ECA rule">
            <elm:expression xsi:type="elm:Instance" classType="anf:ClinicalStatement">
               <elm:annotation >
                  <a:s>Activation of the breast cancer screening order set ECA rule.</a:s>
               </elm:annotation>
               <elm:element name="topic">
                  <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                     <elm:system name="SNOMED CT"/>
                  </elm:value>
               </elm:element>
            </elm:expression>
         </def>
      </trigger>
      <trigger xsi:type="PeriodicEventTrigger">
         <def name="EveryMonth">
            <elm:expression xsi:type="elm:Instance" classType="anf:ClinicalStatement">
               <elm:annotation>Every month on day 1 of the month.</elm:annotation>
               <elm:element name="topic">
                  <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                     <elm:system name="SNOMED CT"/>
                  </elm:value>
               </elm:element>
            </elm:expression>
         </def>
      </trigger>
   </externalData>
   <expressions>
      <def name="PatientAge">
         <elm:expression xsi:type="elm:SingletonFrom">
            <elm:operand xsi:type="elm:Query">
               <elm:source alias="ageQuery">
                  <elm:expression xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="398166005 |Performed (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code"
                           code="[a997cc03-3e99-40eb-833a-6374c7750a3a |Observation procedure (procedure)]
                           ->(363702006 |Has focus (attribute))->[105726004 |Age AND/OR growth finding (finding)]"
                           display="Postcoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </elm:expression>
               </elm:source>
               <elm:return>
                  <elm:expression xsi:type="elm:Property" path="result.lowerBound"/>
               </elm:return>
            </elm:operand>
         </elm:expression>
      </def>
   </expressions>
   <conditions>
      <condition>
         <logic xsi:type="elm:Equal">
            <elm:annotation>
               <a:s>Gender is female</a:s>
            </elm:annotation>
            <elm:operand xsi:type="elm:ExpressionRef" name="PatientGender"/>
            <elm:operand xsi:type="elm:Code"
               code="[a997cc03-3e99-40eb-833a-6374c7750a3a |Observation procedure (procedure)]
               ->(363702006 |Has focus (attribute))->[248152002 |Female (finding)]"
               display="Postcoordinated Expression">
               <elm:system name="SNOMED CT"/>
            </elm:operand>
         </logic>
         <conditionRole value="ApplicableScenario"/>
      </condition>
      <condition>
         <logic xsi:type="elm:GreaterOrEqual">
            <elm:annotation>
               <a:s>Age >=40</a:s>
            </elm:annotation>
            <elm:operand xsi:type="elm:ExpressionRef" name="PatientAge"/>
            <elm:operand xsi:type="elm:Quantity" value="40"/>
         </logic>
         <conditionRole value="ApplicableScenario"/>
      </condition>
   </conditions>
   <actionGroup>
      <subElements>
         <actionGroup>
            <behaviors>
               <behavior xsi:type="GroupSelectionBehavior" value="Any"/>
            </behaviors>
            <title value="General information"/>
            <subElements>
               <simpleAction xsi:type="CollectInformationAction">
                  <documentationConcept>
                     <prompt value="Patient declines early breast cancer screening."/>
                     <responseDataType value="Boolean"/>
                  </documentationConcept>
                  <responseBinding property="declinesEarlyScreening"/>
               </simpleAction>
               <simpleAction xsi:type="CollectInformationAction">
                  <documentationConcept>
                     <prompt value="Patient declines breast cancer screening."/>
                     <responseDataType value="Boolean"/>
                  </documentationConcept>
                  <responseBinding property="declinesScreening"/>
               </simpleAction>
               <simpleAction xsi:type="CollectInformationAction">
                  <documentationConcept>
                     <prompt value="Patient desires to continue breast cancer screening."/>
                     <responseDataType value="Boolean"/>
                  </documentationConcept>
                  <responseBinding property="continueScreening"/>
               </simpleAction>
               <simpleAction xsi:type="CollectInformationAction">
                  <documentationConcept>
                     <prompt value="Patient has a personal history of breast cancer."/>
                     <responseDataType value="Boolean"/>
                  </documentationConcept>
                  <responseBinding property="hasPersonalHistoryOfBreastCancer"/>
               </simpleAction>
               <simpleAction xsi:type="CollectInformationAction">
                  <documentationConcept>
                     <prompt value="Patient has a life expectancy of greater than 10 years."/>
                     <responseDataType value="Boolean"/>
                  </documentationConcept>
                  <responseBinding property="hasExtendedLifeExpectancy"/>
               </simpleAction>
               <simpleAction xsi:type="CollectInformationAction">
                  <documentationConcept>
                     <prompt value="Auto generated patient notifications."/>
                     <responseDataType value="Boolean"/>
                  </documentationConcept>
                  <responseBinding property="autoGeneratedPatientNotifications"/>
               </simpleAction>
            </subElements>
         </actionGroup>
         <actionGroup>
            <behaviors>
               <behavior xsi:type="ReadOnlyBehavior" value="true"/>
            </behaviors>
            <conditions>
               <!-- Age >=40 and <45 -->
               <condition>
                  <logic xsi:type="elm:And">
                     <elm:annotation>
                        <a:s>Age &gt;=40 and &lt;45</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:GreaterOrEqual">
                        <elm:operand xsi:type="elm:ExpressionRef" name="PatientAge"/>
                        <elm:operand xsi:type="elm:Quantity" value="40"/>
                     </elm:operand>
                     <elm:operand xsi:type="elm:Less">
                        <elm:operand xsi:type="elm:ExpressionRef" name="PatientAge"/>
                        <elm:operand xsi:type="elm:Quantity" value="45"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not decline early breast cancer screening. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not decline early breast cancer screening.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Property" path="declinesEarlyScreening">
                        <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a documented mammography screening interval. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a documented mammography screening interval.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="MammographyScreeningInterval"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Has not had mammography within 12 months. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Has not had mammography within 12 months.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="MammographyProcedure"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a personal history of breast cancer. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a personal history of breast cancer.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Property" path="hasPersonalHistoryOfBreastCancer">
                        <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have prior chest radiotherapy at a young age (up to age 30). -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have prior chest radiotherapy at a young age (up to age 30).</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="EarlyChestRadiotherapy"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a suspected or known mutation of a gene such as BRCA that increases the risk of breast cancer. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a suspected or known mutation of a gene such as BRCA that increases the risk of breast cancer.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="GeneticMarker"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
            </conditions>
            <title value="Outpatient Visit, Age &gt;=40 to &lt;45 Years, Desires Early Breast Cancer Screening"/>
            <subElements>
               <!-- Set screening interval to annual. -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Set screening interval to annual."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="268547008 |Screening for malignant neoplasm of breast (procedure)|"
                           display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="result.lowerBound">
                        <elm:value xsi:type="elm:Literal" value="12" valueType="Integer"/>
                     </elm:element>
                     <elm:element name="result.upperBound">
                        <elm:value xsi:type="elm:Literal" value="12" valueType="Integer"/>
                     </elm:element>
                     <elm:element name="result.includeLowerBound">
                        <elm:value xsi:type="elm:Literal" value="TRUE" valueType="Boolean"/>
                     </elm:element>
                     <elm:element name="result.includeLowerBound">
                        <elm:value xsi:type="elm:Literal" value="TRUE" valueType="Boolean"/>
                     </elm:element>
                     <elm:element name="result.resolution">
                        <elm:value xsi:type="elm:Literal" value="12" valueType="Integer"/>
                     </elm:element>
                     <elm:element name="result.measureSemantic">
                        <elm:value xsi:type="elm:Code" code="258706009 |month (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Notify the provider that options for breast cancer screening should be discussed with patient and that the discussion should be documented.-->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent
                     value="Notify the provider that options for breast cancer screening should be discussed with patient and that the discussion should be documented."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code"
                           code="[409073007 |Education (procedure)]
                           ->(363702006 |Has focus (attribute))->[268547008 |Screening for malignant neoplasm of breast (procedure)]"
                           display="Postcoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Activate the breast cancer screening history section of the documentation template. -->
               <!-- Should this be a FireEventAction? -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Activate the breast cancer screening history section of the documentation template."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Activate the breast cancer risk assessment of the documentation template. -->
               <!-- Should this be a FireEventAction? -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Activate the breast cancer risk assessment of the documentation template."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Activate the breast cancer screening order set ECA rule. -->
               <!-- Should this be a FireEventAction? -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Activate the breast cancer screening order set ECA rule."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
            </subElements>
         </actionGroup>
         <actionGroup>
            <behaviors>
               <behavior xsi:type="ReadOnlyBehavior" value="true"/>
            </behaviors>
            <conditions>
               <!-- Age >=40 and <45 -->
               <condition>
                  <logic xsi:type="elm:And">
                     <elm:annotation>
                        <a:s>Age &gt;=40 and &lt;45</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:GreaterOrEqual">
                        <elm:operand xsi:type="elm:ExpressionRef" name="PatientAge"/>
                        <elm:operand xsi:type="elm:Quantity" value="40"/>
                     </elm:operand>
                     <elm:operand xsi:type="elm:Less">
                        <elm:operand xsi:type="elm:ExpressionRef" name="PatientAge"/>
                        <elm:operand xsi:type="elm:Quantity" value="45"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Declines early breast cancer screening. -->
               <condition>
                  <logic xsi:type="elm:IsTrue">
                     <elm:annotation>
                        <a:s>Declines early breast cancer screening.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Property" path="declinesEarlyScreening">
                        <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a documented mammography screening interval. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a documented mammography screening interval.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="MammographyScreeningInterval"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Has not had mammography within 12 months. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Has not had mammography within 12 months.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="MammographyProcedure"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a personal history of breast cancer -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a personal history of breast cancer.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Property" path="hasPersonalHistoryOfBreastCancer">
                        <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have prior chest radiotherapy at a young age (up to age 30). -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have prior chest radiotherapy at a young age (up to age 30).</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="EarlyChestRadiotherapy"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a suspected or known mutation of a gene such as BRCA that increases the risk of breast cancer. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a suspected or known mutation of a gene such as BRCA that increases the risk of breast cancer.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="GeneticMarker"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
            </conditions>
            <title value="Outpatient Visit, Age &gt;=40 to &lt;45 Years, No Desire for Early Breast Cancer Screening"/>
            <subElements>
               <!-- Activate declines breast cancer screening section of the documentation template. -->
               <!-- Should this be a FireEventAction? -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Activate declines breast cancer screening section of the documentation template."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Set screening interval to declines early breast cancer screening. -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Set screening interval to declines early breast cancer screening."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="268547008 |Screening for malignant neoplasm of breast (procedure)|"
                           display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="result.status">
                        <elm:value xsi:type="elm:Code" code="410528005 |Not wanted (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
            </subElements>
         </actionGroup>
         <actionGroup>
            <behaviors>
               <behavior xsi:type="ReadOnlyBehavior" value="true"/>
            </behaviors>
            <conditions>
               <!-- Age >=45 and <55 -->
               <condition>
                  <logic xsi:type="elm:And">
                     <elm:annotation>
                        <a:s>Age &gt;=45 and &lt;55</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:GreaterOrEqual">
                        <elm:operand xsi:type="elm:ExpressionRef" name="PatientAge"/>
                        <elm:operand xsi:type="elm:Quantity" value="45"/>
                     </elm:operand>
                     <elm:operand xsi:type="elm:Less">
                        <elm:operand xsi:type="elm:ExpressionRef" name="PatientAge"/>
                        <elm:operand xsi:type="elm:Quantity" value="55"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Has not had mammography within 12 months. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Has not had mammography within 12 months.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="MammographyProcedure"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a personal history of breast cancer. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a personal history of breast cancer.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Property" path="hasPersonalHistoryOfBreastCancer">
                        <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have prior chest radiotherapy at a young age (up to age 30). -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have prior chest radiotherapy at a young age (up to age 30).</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="EarlyChestRadiotherapy"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a suspected or known mutation of a gene such as BRCA that increases the risk of breast cancer. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a suspected or known mutation of a gene such as BRCA that increases the risk of breast cancer.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="GeneticMarker"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
            </conditions>
            <title value="Outpatient Visit, Age &gt;=45 to &lt;55 Years"/>
            <subElements>
               <!-- Set screening interval to annual.  -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Set screening interval to annual."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="268547008 |Screening for malignant neoplasm of breast (procedure)|"
                           display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="result.lowerBound">
                        <elm:value xsi:type="elm:Literal" value="12" valueType="Integer"/>
                     </elm:element>
                     <elm:element name="result.upperBound">
                        <elm:value xsi:type="elm:Literal" value="12" valueType="Integer"/>
                     </elm:element>
                     <elm:element name="result.includeLowerBound">
                        <elm:value xsi:type="elm:Literal" value="TRUE" valueType="Boolean"/>
                     </elm:element>
                     <elm:element name="result.includeLowerBound">
                        <elm:value xsi:type="elm:Literal" value="TRUE" valueType="Boolean"/>
                     </elm:element>
                     <elm:element name="result.resolution">
                        <elm:value xsi:type="elm:Literal" value="12" valueType="Integer"/>
                     </elm:element>
                     <elm:element name="result.measureSemantic">
                        <elm:value xsi:type="elm:Code" code="258706009 |month (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Notify the provider that options for breast cancer screening should be discussed with patient and that the discussion should be documented. -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent
                     value="Notify the provider that options for breast cancer screening should be discussed with patient and that the discussion should be documented."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code"
                           code="[409073007 |Education (procedure)]
                           ->(363702006 |Has focus (attribute))->[268547008 |Screening for malignant neoplasm of breast (procedure)]"
                           display="Postcoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Activate the breast cancer screening history section of the documentation template. -->
               <!-- Should this be a FireEventAction? -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Activate the breast cancer screening history section of the documentation template."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Activate the breast cancer risk assessment of the documentation template. -->
               <!-- Should this be a FireEventAction? -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Activate the breast cancer risk assessment of the documentation template."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Activate the breast cancer screening order set ECA rule. -->
               <!-- Should this be a FireEventAction? -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Activate the breast cancer screening order set ECA rule."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
            </subElements>
         </actionGroup>
         <actionGroup>
            <behaviors>
               <behavior xsi:type="ReadOnlyBehavior" value="true"/>
            </behaviors>
            <conditions>
               <!-- Age >=55 and <75 -->
               <condition>
                  <logic xsi:type="elm:And">
                     <elm:annotation>
                        <a:s>Age &gt;=55 and &lt;75</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:GreaterOrEqual">
                        <elm:operand xsi:type="elm:ExpressionRef" name="PatientAge"/>
                        <elm:operand xsi:type="elm:Quantity" value="55"/>
                     </elm:operand>
                     <elm:operand xsi:type="elm:Less">
                        <elm:operand xsi:type="elm:ExpressionRef" name="PatientAge"/>
                        <elm:operand xsi:type="elm:Quantity" value="75"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Has not had mammography within 12 months. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Has not had mammography within 12 months.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="MammographyProcedure"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a documented mammography screening interval. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a documented mammography screening interval.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="MammographyScreeningInterval"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a personal history of breast cancer. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a personal history of breast cancer.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Property" path="hasPersonalHistoryOfBreastCancer">
                        <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have prior chest radiotherapy at a young age (up to age 30). -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have prior chest radiotherapy at a young age (up to age 30).</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="EarlyChestRadiotherapy"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a suspected or known mutation of a gene such as BRCA that increases the risk of breast cancer. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a suspected or known mutation of a gene such as BRCA that increases the risk of breast cancer.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="GeneticMarker"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
            </conditions>
            <title value="Outpatient Visit, Age gt;=55 to &lt;75 Years"/>
            <subElements>
               <!-- Set screening interval to biennial. -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Set screening interval to biennial."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="268547008 |Screening for malignant neoplasm of breast (procedure)|"
                           display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="result.lowerBound">
                        <elm:value xsi:type="elm:Literal" value="24" valueType="Integer"/>
                     </elm:element>
                     <elm:element name="result.upperBound">
                        <elm:value xsi:type="elm:Literal" value="24" valueType="Integer"/>
                     </elm:element>
                     <elm:element name="result.includeLowerBound">
                        <elm:value xsi:type="elm:Literal" value="TRUE" valueType="Boolean"/>
                     </elm:element>
                     <elm:element name="result.includeLowerBound">
                        <elm:value xsi:type="elm:Literal" value="TRUE" valueType="Boolean"/>
                     </elm:element>
                     <elm:element name="result.resolution">
                        <elm:value xsi:type="elm:Literal" value="24" valueType="Integer"/>
                     </elm:element>
                     <elm:element name="result.measureSemantic">
                        <elm:value xsi:type="elm:Code" code="258706009 |month (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Notify the provider that options for breast cancer screening should be discussed with patient and that the discussion should be documented. -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent
                     value="Notify the provider that options for breast cancer screening should be discussed with patient and that the discussion should be documented."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code"
                           code="[409073007 |Education (procedure)]
                           ->(363702006 |Has focus (attribute))->[268547008 |Screening for malignant neoplasm of breast (procedure)]"
                           display="Postcoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Activate the breast cancer screening history section of the documentation template. -->
               <!-- Should this be a FireEventAction? -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Activate the breast cancer screening history section of the documentation template."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Activate the breast cancer screening documentation template. -->
               <!-- Should this be a FireEventAction? -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Activate the breast cancer screening documentation template."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Activate the breast cancer screening order set ECA rule. -->
               <!-- Should this be a FireEventAction? -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Activate the breast cancer screening order set ECA rule."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
            </subElements>
         </actionGroup>
         <actionGroup>
            <behaviors>
               <behavior xsi:type="ReadOnlyBehavior" value="true"/>
            </behaviors>
            <conditions>
               <!-- Age >=75 -->
               <condition>
                  <logic xsi:type="elm:GreaterOrEqual">
                     <elm:annotation>
                        <a:s>Age &gt;=75</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:ExpressionRef" name="PatientAge"/>
                     <elm:operand xsi:type="elm:Quantity" value="75"/>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Has a life expectancy greater than 10 years. -->
               <condition>
                  <logic xsi:type="elm:IsTrue">
                     <elm:annotation>
                        <a:s>Has a life expectancy greater than 10 years.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Property" path="hasExtendedLifeExpectancy">
                        <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Desires to continue breast cancer screening. -->
               <condition>
                  <logic xsi:type="elm:IsTrue">
                     <elm:annotation>
                        <a:s>Desires to continue breast cancer screening.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Property" path="continueScreening">
                        <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Has not had mammography within 12 months. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Has not had mammography within 12 months.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="MammographyProcedure"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a mammography screening interval set to "stop screening." -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a mammography screening interval set to "stop screening."</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Contains">
                        <elm:operand xsi:type="elm:ExpressionRef" name="MammographyScreeningInterval"/>
                        <elm:operand xsi:type="elm:Code" code="410546004 |Discontinued (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a personal history of breast cancer. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a personal history of breast cancer.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Property" path="hasPersonalHistoryOfBreastCancer">
                        <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have prior chest radiotherapy at a young age (up to age 30). -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have prior chest radiotherapy at a young age (up to age 30).</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="EarlyChestRadiotherapy"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a suspected or known mutation of a gene such as BRCA that increases the risk of breast cancer. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a suspected or known mutation of a gene such as BRCA that increases the risk of breast cancer.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="GeneticMarker"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
            </conditions>
            <title value="Outpatient Visit, Age &gt;=75 Years, Desires to Continue Screening"/>
            <subElements>
               <!-- Set screening interval to biennial.  -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Set screening interval to biennial."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="268547008 |Screening for malignant neoplasm of breast (procedure)|"
                           display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="result.lowerBound">
                        <elm:value xsi:type="elm:Literal" value="24" valueType="Integer"/>
                     </elm:element>
                     <elm:element name="result.upperBound">
                        <elm:value xsi:type="elm:Literal" value="24" valueType="Integer"/>
                     </elm:element>
                     <elm:element name="result.includeLowerBound">
                        <elm:value xsi:type="elm:Literal" value="TRUE" valueType="Boolean"/>
                     </elm:element>
                     <elm:element name="result.includeLowerBound">
                        <elm:value xsi:type="elm:Literal" value="TRUE" valueType="Boolean"/>
                     </elm:element>
                     <elm:element name="result.resolution">
                        <elm:value xsi:type="elm:Literal" value="24" valueType="Integer"/>
                     </elm:element>
                     <elm:element name="result.measureSemantic">
                        <elm:value xsi:type="elm:Code" code="258706009 |month (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Notify the provider that options for breast cancer screening should be discussed with patient and that the discussion should be documented. -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent
                     value="Notify the provider that options for breast cancer screening should be discussed with patient and that the discussion should be documented."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code"
                           code="[409073007 |Education (procedure)]
                           ->(363702006 |Has focus (attribute))->[268547008 |Screening for malignant neoplasm of breast (procedure)]"
                           display="Postcoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Activate the breast cancer screening history section of the documentation template. -->
               <!-- Should this be a FireEventAction? -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Activate the breast cancer screening history section of the documentation template."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Activate the breast cancer screening documentation template. -->
               <!-- Should this be a FireEventAction? -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Activate the breast cancer screening documentation template."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
               <!-- Activate the breast cancer screening order set ECA rule. -->
               <!-- Should this be a FireEventAction? -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Activate the breast cancer screening order set ECA rule."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
            </subElements>
         </actionGroup>
         <actionGroup>
            <behaviors>
               <behavior xsi:type="ReadOnlyBehavior" value="true"/>
            </behaviors>
            <conditions>
               <!-- Age >=75 -->
               <condition>
                  <logic xsi:type="elm:GreaterOrEqual">
                     <elm:annotation>
                        <a:s>Age &gt;=75</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:ExpressionRef" name="PatientAge"/>
                     <elm:operand xsi:type="elm:Quantity" value="75"/>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Has a life expectancy greater than 10 years. -->
               <condition>
                  <logic xsi:type="elm:IsTrue">
                     <elm:annotation>
                        <a:s>Has a life expectancy greater than 10 years.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Property" path="hasExtendedLifeExpectancy">
                        <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Desires to stop breast cancer screening. -->
               <condition>
                  <logic xsi:type="elm:IsFalse">
                     <elm:annotation>
                        <a:s>Desires to stop breast cancer screening.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Property" path="continueScreening">
                        <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Has not had mammography within 12 months. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Has not had mammography within 12 months.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="MammographyProcedure"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a mammography screening interval set to "stop screening." -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a mammography screening interval set to "stop screening."</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Contains">
                        <elm:operand xsi:type="elm:ExpressionRef" name="MammographyScreeningInterval"/>
                        <elm:operand xsi:type="elm:Code" code="410546004 |Discontinued (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a personal history of breast cancer. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a personal history of breast cancer.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Property" path="hasPersonalHistoryOfBreastCancer">
                        <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have prior chest radiotherapy at a young age (up to age 30). -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have prior chest radiotherapy at a young age (up to age 30).</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="EarlyChestRadiotherapy"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not have a suspected or known mutation of a gene such as BRCA that increases the risk of breast cancer. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not have a suspected or known mutation of a gene such as BRCA that increases the risk of breast cancer.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="GeneticMarker"> </elm:operand>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
            </conditions>
            <title value="Outpatient Visit, Age &gt;=75 Years, Desires to Stop Screening"/>
            <subElements>
               <!-- Set screening interval to stop screening. -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Set screening interval to stop screening."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="268547008 |Screening for malignant neoplasm of breast (procedure)|"
                           display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="result.status">
                        <elm:value xsi:type="elm:Code" code="410546004 |Discontinued (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
            </subElements>
         </actionGroup>
         <actionGroup>
            <behaviors>
               <behavior xsi:type="ReadOnlyBehavior" value="true"/>
            </behaviors>
            <conditions>
               <!-- Make this rule depends on 'Activation of the breast cancer screening order set ECA rule' trigger expression. -->
               <condition>
                  <logic xsi:type="elm:Exists">
                     <elm:operand xsi:type="elm:ExpressionRef" name="Activation of the breast cancer screening order set ECA rule"/>
                  </logic>
                  <conditionRole/>
               </condition>
               <!-- Breast Cancer Screening due date is prior to NOW or in the next 60 days -->
               <condition>
                  <logic xsi:type="elm:Before">
                     <elm:operand xsi:type="elm:ExpressionRef" name="ScreeningDueDate"/>
                     <elm:operand xsi:type="elm:Add">
                        <elm:operand xsi:type="elm:Now"/>
                        <elm:operand xsi:type="elm:Quantity" value="60" unit="days"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Is not scheduled for Breast Cancer Screening -->
               <condition>
                  <logic xsi:type="elm:IsFalse">
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="ScreeningScheduleDate"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not decline screening at this time. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not decline screening at this time.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Property" path="declinesScreening">
                        <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
            </conditions>
            <title value="Breast Cancer Screening Order Set ECA Rule"/>
            <subElements>
               <!-- Activate the breast cancer screening order set. -->
               <!-- Should this be a FireEventAction? -->
               <simpleAction xsi:type="CreateAction">
                  <textEquivalent value="Activate the breast cancer screening order set."/>
                  <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                     <elm:element name="statementType">
                        <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                     <elm:element name="topic">
                        <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                           <elm:system name="SNOMED CT"/>
                        </elm:value>
                     </elm:element>
                  </actionSentence>
               </simpleAction>
            </subElements>
         </actionGroup>
         <actionGroup>
            <behaviors>
               <behavior xsi:type="ReadOnlyBehavior" value="true"/>
            </behaviors>
            <conditions>
               <!-- Make this ECA Rule depends on EveryMonth trigger expression  -->
               <condition>
                  <logic xsi:type="elm:Exists">
                     <elm:operand xsi:type="elm:ExpressionRef" name="EveryMonth"/>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Breast cancer screening due date is within the time period spanning 1 month ago to 2 months from now. -->
               <condition>
                  <logic xsi:type="elm:In">
                     <elm:operand xsi:type="elm:ExpressionRef" name="ScreeningDueDate"/>
                     <elm:operand xsi:type="elm:Interval">
                        <elm:low xsi:type="elm:Subtract">
                           <elm:operand xsi:type="elm:Now"/>
                           <elm:operand xsi:type="elm:Quantity" value="1" unit="months"/>
                        </elm:low>
                        <elm:high xsi:type="elm:Add">
                           <elm:operand xsi:type="elm:Now"/>
                           <elm:operand xsi:type="elm:Quantity" value="2" unit="months"/>
                        </elm:high>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Is not scheduled for breast cancer screening. -->
               <condition>
                  <logic xsi:type="elm:IsFalse">
                     <elm:operand xsi:type="elm:Exists">
                        <elm:operand xsi:type="elm:ExpressionRef" name="ScreeningScheduleDate"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
               <!-- Does not decline screening at this time. -->
               <condition>
                  <logic xsi:type="elm:Not">
                     <elm:annotation>
                        <a:s>Does not decline screening at this time.</a:s>
                     </elm:annotation>
                     <elm:operand xsi:type="elm:Property" path="declinesScreening">
                        <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                     </elm:operand>
                  </logic>
                  <conditionRole value="ApplicableScenario"/>
               </condition>
            </conditions>
            <title value="Periodic System Run"/>
            <subElements>
               <actionGroup>
                  <conditions>
                     <!-- Facility uses auto-generated patient notifications. -->
                     <condition>
                        <logic xsi:type="elm:IsTrue">
                           <elm:annotation>
                              <a:s>Facility uses auto-generated patient notifications.</a:s>x </elm:annotation>
                           <elm:operand xsi:type="elm:Property" path="autoGeneratedPatientNotifications">
                              <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                           </elm:operand>
                        </logic>
                        <conditionRole value="ApplicableScenario"/>
                     </condition>
                  </conditions>
                  <subElements>
                     <!-- Notify the patient of their Breast Cancer Screening due date. -->
                     <simpleAction xsi:type="CreateAction">
                        <textEquivalent value="Notify the patient of their Breast Cancer Screening due date."/>
                        <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                           <elm:element name="statementType">
                              <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                                 <elm:system name="SNOMED CT"/>
                              </elm:value>
                           </elm:element>
                           <elm:element name="topic">
                              <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                                 <elm:system name="SNOMED CT"/>
                              </elm:value>
                           </elm:element>
                        </actionSentence>
                     </simpleAction>
                  </subElements>
               </actionGroup>
               <actionGroup>
                  <conditions>
                     <!-- Facility does not use auto-generated patient notifications. -->
                     <condition>
                        <logic xsi:type="elm:IsFalse">
                           <elm:annotation>
                              <a:s>Facility does not use auto-generated patient notifications.</a:s>x </elm:annotation>
                           <elm:operand xsi:type="elm:Property" path="autoGeneratedPatientNotifications">
                              <elm:source xsi:type="elm:ParameterRef" name="Responses"/>
                           </elm:operand>
                        </logic>
                        <conditionRole value="ApplicableScenario"/>
                     </condition>
                  </conditions>
                  <subElements>
                     <!-- Add the patient to the report of patients due for breast cancer screening with their Breast Cancer Screening due date. -->
                     <simpleAction xsi:type="CreateAction">
                        <textEquivalent
                           value="Add the patient to the report of patients due for breast cancer screening with their Breast Cancer Screening due date."/>
                        <actionSentence xsi:type="elm:Instance" classType="anf:ClinicalStatement">
                           <elm:element name="statementType">
                              <elm:value xsi:type="elm:Code" code="385644000 |Requested (qualifier value)|" display="Precoordinated Expression">
                                 <elm:system name="SNOMED CT"/>
                              </elm:value>
                           </elm:element>
                           <elm:element name="topic">
                              <elm:value xsi:type="elm:Code" code="TSR-NoCode" display="Precoordinated Expression">
                                 <elm:system name="SNOMED CT"/>
                              </elm:value>
                           </elm:element>
                        </actionSentence>
                     </simpleAction>
                  </subElements>
               </actionGroup>
            </subElements>
         </actionGroup>
      </subElements>
   </actionGroup>
</knowledgeDocument>
